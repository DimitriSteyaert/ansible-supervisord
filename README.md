## Supervisord

[![Ansible Galaxy](http://img.shields.io/badge/galaxy-DimitriSteyaert/supervisord-660198.svg?style=flat)](https://galaxy.ansible.com/detail#/role/DimitriSteyaert)


This role installs the Supervisor process control system and optionally lets you manage its programs, listeners and groups. The option to enable the web gui is also included.

### Installation

This role requires at least Ansible `v1.9`. To install it, run:

```Shell
ansible-galaxy install DimitriSteyaert/supervisord
```


### Role variables

List of default variables available in the inventory:

```YAML
---
supervisor_state: present
supervisor_purge: no
supervisor_manage_conf: false

supervisor_http_server: false
supervisor_http_host: 0.0.0.0
supervisor_http_port: 9001
supervisor_http_username: user
supervisor_http_password: pass

supervisor_programs: []
supervisor_listeners: []
supervisor_groups: []
supervisor_configs: []
```


### Detailed usage guide

By default this module just manages the Supervisor installation through the system's package manager. The management of its programs, listeners and groups via Ansible can be optionally enabled.
#### Examples

This is a basic playbook to install Supervisord with the default variables:

```YAML
---
- hosts: all
  roles:
    - supervisord
```

If you want a fully Ansible managed Supervisor with enabled web interface you can use the following code variables as an example.

```YAML
---
supervisor_manage_conf: true

supervisor_programs:
  - name: nodejs
    command: '/var/www/app/current/node_modules/.bin/babel-node --presets react,es2015 /var/www/app/current/src/server.js'
    autostart: 'true'
    autorestart: 'true'
    stdout_logfile: /var/log/supervisor/nodejs.log
    stderr_logfile: /var/log/supervisor/nodejs.err
    environment: |
      NODE_ENV=production,
        VHOST=example.org,
        PORT=80,
        HOST=127.0.0.1,

supervisor_configs:
  - name: 'nodejs'
    state: restarted

supervisor_http_server: true
supervisor_http_host: 0.0.0.0
supervisor_http_port: 9001
supervisor_http_username: USERNAME
supervisor_http_password: PASSWORD

```
- **supervisor_manage_conf**: should be set to ```true``` to manage the programs, listeners and groups via Ansible.
- **supervisor_programs**: accepts an array with the programs to manage, this same applies to the **listeners** and **groups**.
  - Every key-value combination will be set in the configuration and only the known parameters for Supervisor will work.
- **supervisor_configs**: the name will be parsed by ```supervisorctl``` and will let you manage the state of the program, listener and group configurations.


### Authors and license

The `supervisord` role was written by:

- [Dimitri Steyaert](https://www.steyaert.be) | [e-mail](mailto:dimitri@steyaert.be) | [Twitter](https://twitter.com/DimitriSteyaert)

License: [MIT](https://tldrlegal.com/license/mit-license)

***

README generated by [Ansigenome](https://github.com/nickjj/ansigenome/).
